<div class="title-function">
  <h3>CREATE ROOM</h3>
</div>
<div class="exit" title="Thoát" (click)="closeModal()">Thoát</div>

<p>{{errMessage}}</p>
<form #createForm="ngForm">
  <table class="infoUpdate">
    <tr>
      <td>
        <label class="label" for="RoomNumber">Room Number</label>
        <input type="text" class="form-control" #RoomNumber="ngModel" name="RoomNumber" id="RoomNumber" placeholder="Enter Room Number" [(ngModel)]="room.RoomNumber" required [class.is-invalid]="RoomNumber.invalid && RoomNumber.touched">
        <div *ngIf="RoomNumber.errors && (RoomNumber.valid || RoomNumber.touched)">
          <small class="text-danger" *ngIf="RoomNumber.errors['required']">Please enter Room Number</small>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="RoomType">Room Type</label>
        <input type="text" class="form-control" #RoomType="ngModel" name="RoomType" id="RoomType" placeholder="Enter Room Type" [(ngModel)]="room.RoomType" required [class.is-invalid]="RoomType.invalid && RoomType.touched">
        <div *ngIf="RoomType.errors && (RoomType.valid || RoomType.touched)">
          <small class="text-danger" *ngIf="RoomType.errors['required']">Please enter Room Type</small>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="DefaultQty">DefaultQty</label>
        <input type="number" class="form-control" #DefaultQty="ngModel" name="DefaultQty" id="DefaultQty" placeholder="Enter DefaultQty" [(ngModel)]="room.DefaultQty" min="2" required [class.is-invalid]="DefaultQty.invalid && DefaultQty.touched">
        <div *ngIf="DefaultQty.errors && (DefaultQty.valid || DefaultQty.touched)">
          <small class="text-danger" *ngIf="DefaultQty.errors['required']">Please enter DefaultQty</small>
          <small class="text-danger" *ngIf="DefaultQty.errors['min']">DefaultQty must be greater than or equal to 2</small>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="Capacity">Capacity</label>
        <input type="number" class="form-control" #Capacity="ngModel" name="Capacity" id="Capacity" placeholder="Enter Capacity" [(ngModel)]="room.Capacity" min="2" required [class.is-invalid]="Capacity.invalid && Capacity.touched">
        <div *ngIf="Capacity.errors && (Capacity.valid || Capacity.touched)">
          <small class="text-danger" *ngIf="Capacity.errors['required']">Please enter Capacity</small>
          <small class="text-danger" *ngIf="Capacity.errors['min']">Capacity must be greater than or equal to 2</small>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="AdultPrice">Adult Price</label>
        <input type="number" class="form-control" #AdultPrice="ngModel" name="AdultPrice" id="AdultPrice" placeholder="Enter Adult Price" [(ngModel)]="room.AdultPrice" min="0" required [class.is-invalid]="AdultPrice.invalid && AdultPrice.touched" [valueAsNumber]="0">

        <div *ngIf="AdultPrice.errors && AdultPrice.touched">
          <small class="text-danger" *ngIf="AdultPrice.errors['required']">Please enter Adult Price</small>
          <small class="text-danger" *ngIf="AdultPrice.errors['min']">Not less than 0</small>
        </div>
        <small class="text-danger" *ngIf="AdultPrice.valid && AdultPrice.touched && AdultPrice.value<200000 && AdultPrice.value !== 0">Adult price can be zero or must be more than 200.000 vnđ</small>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="ChildrenPrice">Children Price</label>
        <input type="number" class="form-control" #ChildrenPrice="ngModel" name="ChildrenPrice" id="ChildrenPrice" placeholder="Enter Children Price" [(ngModel)]="room.ChildrenPrice" min="0" required [class.is-invalid]="ChildrenPrice.invalid && ChildrenPrice.touched" [valueAsNumber]="0">

        <div *ngIf="ChildrenPrice.errors && (ChildrenPrice.valid || ChildrenPrice.touched)">
          <small class="text-danger" *ngIf="ChildrenPrice.errors['required']">Please enter Children Price</small>
          <small class="text-danger" *ngIf="ChildrenPrice.errors['min']">Not less than 0</small>
        </div>
        <small class="text-danger" *ngIf="ChildrenPrice.valid && ChildrenPrice.touched && ChildrenPrice.value<100000 && ChildrenPrice.value !== 0">Children price can be zero or must be more than 100.000 vnđ</small>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="RoomPrice">Room Price</label>
        <input type="number" class="form-control" #RoomPrice="ngModel" name="RoomPrice" id="RoomPrice" placeholder="Enter Room Price" [(ngModel)]="room.RoomPrice" min="500000" required [class.is-invalid]="RoomPrice.invalid && RoomPrice.touched">
        <div *ngIf="RoomPrice.errors && (RoomPrice.valid || RoomPrice.touched)">
          <small class="text-danger" *ngIf="RoomPrice.errors['required']">Please enter RoomPrice</small>
          <small class="text-danger" *ngIf="RoomPrice.errors['min']">Room price must be at least over 500.000 vnđ</small>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="RoomDescription">Room Description</label>
        <textarea class="form-control" #RoomDescription="ngModel" name="RoomDescription" id="RoomDescription" placeholder="Enter Room Description" [(ngModel)]="room.RoomDescription" cols="30" rows="10" spellcheck="true" required [class.is-invalid]="RoomDescription.invalid && RoomDescription.touched"></textarea>
        <div *ngIf="RoomDescription.errors && (RoomDescription.valid || RoomDescription.touched)">
          <small class="text-danger" *ngIf="RoomDescription.errors['required']">Please enter RoomDescription</small>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label class="label" for="RoomImage">Image Room:</label>
        <div class="frame-upload-img">
          <input type="file" class="file-input" #RoomImage="ngModel" name="RoomImage" id="RoomImage" [(ngModel)]="room.RoomImage" (change)="onFileSelected($event, room)" required [class.is-invalid]="RoomImage.invalid && RoomImage.touched">
          <img [src]="room.RoomImage">
        </div>
        <div *ngIf="RoomImage.errors && (RoomImage.valid || RoomImage.touched)">
          <small class="text-danger" *ngIf="RoomImage.errors['required']">Please choose Room Image</small>
        </div>
      </td>
    </tr>
    <tr>
      <td class="branch-code">
        <label class="label" for="BranchName">Branch:</label>
        <input type="text" class="form-control" #BranchName="ngModel" name="BranchName" id="BranchName" readonly [(ngModel)]="branchName">
      </td>
    </tr>
    <tr>
      <td colspan="2" [ngClass]="(createForm.form.valid) ? valid : invalid">
        <button type="submit" [disabled]="createForm.form.invalid || room.RoomNumber == 'none' || room.RoomType == 'none' || room.RoomPrice < 500000 || room.AdultPrice < 0 || room.ChildrenPrice < 0 || room.Capacity < 2 || room.RoomDescription == 'none' || room.RoomImage == 'none'" (click)="postRoom()">Create Room</button>
      </td>
    </tr>
  </table>
  <!-- <p>{{room|json}}</p> -->
</form>
